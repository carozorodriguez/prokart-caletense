<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Ficha de Piloto | PROKART CALETENSE</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@300;500;700&display=swap" rel="stylesheet">

  <style>
    :root { --rojo:#e10600; --negro:#111; --gris:#f4f4f4; }

    body{
      margin:0;
      font-family:'Oswald', Arial, sans-serif;
      background:var(--gris);
      color:#222;
    }

    header{
      background:#000;
      color:#fff;
      padding:40px 20px;
      text-align:center;
    }

    header img{
      width:180px;
      height:180px;
      object-fit:cover;
      border-radius:50%;
      border:5px solid var(--rojo);
      background:#fff;
    }

    section{
      max-width:900px;
      margin:auto;
      padding:40px 20px;
    }

    .card{
      background:#fff;
      padding:30px;
      border-radius:12px;
      box-shadow:0 6px 20px rgba(0,0,0,.15);
    }

    .grid{
      display:grid;
      grid-template-columns:repeat(auto-fit,minmax(200px,1fr));
      gap:20px;
      margin-top:20px;
    }

    table{
      width:100%;
      border-collapse:collapse;
      margin-top:15px;
    }

    th, td{
      padding:10px;
      border-bottom:1px solid #ddd;
      text-align:left;
    }

    th{
      background:#111;
      color:#fff;
    }

    .dato{
      font-size:1.2em;
    }

    .qr{
      text-align:center;
      margin-top:30px;
    }

    a{
      color:var(--rojo);
      text-decoration:none;
    }
  </style>
</head>
<body>

<header>
  <img id="fotoPiloto" src="pilotos/default.jpg" alt="Foto del piloto">
  <h1 id="nombrePiloto">Piloto</h1>
  <p id="categoriaPiloto">Categoría</p>
</header>

<section>
  <div class="card">

    <h2>Datos del Campeonato</h2>
    <div class="grid">
      <div class="dato">
        Puntos Totales: <strong id="puntos">0</strong>
      </div>
      <div class="dato">
        Posición en el Campeonato: <strong id="posicion">-</strong>
      </div>
    </div>

    <h2 style="margin-top:40px">Historial por Fechas</h2>
    <table>
      <thead>
        <tr>
          <th>Fecha</th>
          <th>Puesto</th>
          <th>Puntos</th>
        </tr>
      </thead>
      <tbody id="historial"></tbody>
    </table>

    <div class="qr">
      <h3>QR del Piloto</h3>
      <img id="qr" alt="QR del piloto">
    </div>

    <p style="margin-top:30px">
      <a href="index.html">← Volver al campeonato</a>
    </p>

  </div>
</section>

<script>
/* ===============================
   PARÁMETROS URL
================================ */
const params = new URLSearchParams(window.location.search);
const piloto = params.get('piloto');
const categoria = params.get('categoria');

if (!piloto || !categoria) {
  alert('Piloto o categoría no especificados');
}

/* ===============================
   CSV POR CATEGORÍA
================================ */
const categorias = {
  "PRE JUNIOR":
    "https://docs.google.com/spreadsheets/d/e/2PACX-1vQFypnuhKrIq3bwVhehER3JFHbPukGhNGqrAqC2avomKgLPdu6C069biQFU5lAcJ3_6kt7Jntl4dre0/pub?output=csv"
};

/* ===============================
   ELEMENTOS
================================ */
const nombrePiloto = document.getElementById('nombrePiloto');
const categoriaPiloto = document.getElementById('categoriaPiloto');
const puntosEl = document.getElementById('puntos');
const posicionEl = docum
